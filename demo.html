<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo Inteligente | Smart Ink</title>
    <link rel="icon" type="image/png" href="favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              navy: "#0A192F",
              gold: "#C9A227",
              radar: "#00FF94",
            },
            fontFamily: {
              sans: ["Inter", "ui-sans-serif", "system-ui", "-apple-system", "BlinkMacSystemFont"],
            },
          },
        },
      };
    </script>
    <style>
      body {
        background-color: #0a192f;
        color: #ffffff;
        font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont;
      }
      .hud-overlay::before,
      .hud-overlay::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
      }
      .hud-overlay::before {
        background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 60px 60px;
      }
      .hud-overlay::after {
        background: radial-gradient(circle at 30% 20%, rgba(201, 162, 39, 0.2), transparent 55%),
          radial-gradient(circle at 80% 65%, rgba(0, 255, 148, 0.08), transparent 60%);
      }
      .card-bg {
        background: rgba(10, 25, 47, 0.85);
        backdrop-filter: blur(8px);
      }
      .chart-wrapper {
        height: 320px;
      }
    </style>
  </head>
  <body class="min-h-screen relative hud-overlay overflow-x-hidden">
    <div class="relative z-10">
      <header class="flex items-center justify-between px-6 py-4 md:px-12">
        <div class="flex items-center space-x-3">
          <img src="logo.png" alt="Smart Ink" class="h-10 w-auto" />
          <span class="text-sm uppercase tracking-[0.3em] text-white/70">Smart Ink</span>
        </div>
        <a
          href="index.html"
          class="rounded-2xl border border-gold/60 bg-gold px-5 py-2 text-sm font-semibold text-navy shadow-lg shadow-gold/30 transition hover:-translate-y-0.5 hover:shadow-xl"
        >
          Volver al inicio
        </a>
      </header>

      <main class="px-6 pb-16 pt-6 md:px-12">
        <div class="mx-auto max-w-5xl">
          <div class="mb-10 text-center">
            <h1 class="text-3xl font-semibold md:text-4xl">Demo Inteligente</h1>
            <p class="mt-3 text-base text-white/70 md:text-lg">
              Visualiza cómo Smart Ink automatiza el procesamiento documental y transforma tus datos en indicadores accionables.
            </p>
          </div>

          <div class="rounded-3xl border border-white/10 bg-white/5 p-2">
            <div id="root" class="min-h-[200px] text-center text-white/60">Cargando Demo…</div>
          </div>
        </div>
      </main>
    </div>

    <noscript>
      <div class="text-center text-white/80">
        Cargando Demo… Activa JavaScript para ver la experiencia completa.
      </div>
    </noscript>

    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>

    <script type="text/babel">
      const { useState, useEffect, useMemo, useRef } = React;
      const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid, LineChart, Line } = Recharts;

      const tabs = [
        { key: 'presentacion', label: 'Presentación automática' },
        { key: 'calculadora', label: 'Calculadora interactiva' },
      ];

      const generateBarData = () => {
        const days = ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'];
        return days.map((day) => ({
          dia: day,
          facturas: Math.floor(Math.random() * 51) + 50,
        }));
      };

      const DemoTabPresentation = () => {
        const [progress, setProgress] = useState(0);
        const [isRunning, setIsRunning] = useState(false);
        const [data, setData] = useState(generateBarData);
        const intervalRef = useRef(null);

        useEffect(() => {
          if (isRunning && progress < 100) {
            intervalRef.current = setInterval(() => {
              setProgress((prev) => {
                const next = prev + 2;
                if (next >= 100) {
                  clearInterval(intervalRef.current);
                  return 100;
                }
                return next;
              });
            }, 100);
          }
          return () => clearInterval(intervalRef.current);
        }, [isRunning]);

        useEffect(() => {
          if (progress === 100) {
            setIsRunning(false);
          }
        }, [progress]);

        const handleStart = () => {
          clearInterval(intervalRef.current);
          setData(generateBarData());
          setProgress(0);
          setIsRunning(true);
        };

        const handleReset = () => {
          clearInterval(intervalRef.current);
          setProgress(0);
          setIsRunning(false);
        };

        return (
          <div className="card-bg relative overflow-hidden rounded-3xl p-8 text-white shadow-xl">
            <div className="relative z-10">
              <h2 className="text-2xl font-semibold">Presentación automática</h2>
              <p className="mt-2 text-sm text-white/70 md:text-base">
                Inicia la demo para ver cómo Smart Ink procesa documentos y genera métricas.
              </p>

              <div className="mt-8 grid gap-6 md:grid-cols-[1fr_auto] md:items-center">
                <div>
                  {progress < 100 ? (
                    <div>
                      <p className="mb-3 text-sm uppercase tracking-widest text-white/60">
                        Procesando documentos…
                      </p>
                      <div className="h-3 w-full overflow-hidden rounded-full bg-white/10">
                        <div
                          className="h-full rounded-full bg-gold transition-all duration-100"
                          style={{ width: `${progress}%` }}
                        ></div>
                      </div>
                      <p className="mt-2 text-right text-xs text-white/60">{progress}%</p>
                    </div>
                  ) : (
                    <div className="chart-wrapper">
                      <ResponsiveContainer width="100%" height="100%">
                        <BarChart data={data}>
                          <CartesianGrid stroke="rgba(255,255,255,0.1)" vertical={false} />
                          <XAxis dataKey="dia" stroke="#ffffff" tick={{ fill: '#ffffff' }} />
                          <YAxis stroke="#ffffff" tick={{ fill: '#ffffff' }} allowDecimals={false} />
                          <Tooltip
                            contentStyle={{
                              backgroundColor: '#0A192F',
                              borderRadius: '12px',
                              border: '1px solid rgba(255,255,255,0.1)',
                              color: '#ffffff',
                            }}
                          />
                          <Bar dataKey="facturas" fill="#C9A227" radius={[10, 10, 0, 0]} />
                        </BarChart>
                      </ResponsiveContainer>
                    </div>
                  )}
                </div>

                <div className="flex flex-col gap-3">
                  <button
                    onClick={handleStart}
                    className="rounded-2xl bg-gold px-5 py-3 text-sm font-semibold text-navy shadow-lg shadow-gold/30 transition hover:-translate-y-0.5 hover:shadow-xl"
                  >
                    Iniciar demo
                  </button>
                  <button
                    onClick={handleReset}
                    className="rounded-2xl border border-white/20 px-5 py-3 text-sm font-semibold text-white/80 transition hover:border-white/40"
                  >
                    Reiniciar demo
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const KPI = ({ icon, label, value, accent }) => (
        <div className="card-bg rounded-3xl border border-white/10 p-6 text-left">
          <div className="text-2xl" aria-hidden="true">{icon}</div>
          <p className="mt-4 text-sm font-medium uppercase tracking-[0.2em] text-white/60">{label}</p>
          <p className={`mt-2 text-2xl font-semibold ${accent}`}>{value}</p>
        </div>
      );

      const DemoTabCalculator = () => {
        const [ingresos, setIngresos] = useState(35000);
        const [gastos, setGastos] = useState(18000);
        const [facturas, setFacturas] = useState(250);

        const metrics = useMemo(() => {
          const ahorro = ingresos * 0.05 - gastos * 0.02 + facturas * 5;
          const roi = gastos > 0 ? (ahorro / gastos) * 100 : 0;
          const dias = Math.max(10, Math.round(90 - roi / 2));
          const trend = Array.from({ length: 5 }, (_, idx) => ({
            etiqueta: `Semana ${idx + 1}`,
            roi: Math.max(roi * (0.85 + idx * 0.04), 0),
          }));
          return { ahorro, roi, dias, trend };
        }, [ingresos, gastos, facturas]);

        const formatCurrency = (value) =>
          value.toLocaleString('es-MX', { style: 'currency', currency: 'MXN', maximumFractionDigits: 0 });

        const formatPercent = (value) =>
          `${value.toFixed(1)}%`;

        return (
          <div className="card-bg rounded-3xl p-8 text-white shadow-xl">
            <h2 className="text-2xl font-semibold">Calculadora interactiva</h2>
            <p className="mt-2 text-sm text-white/70 md:text-base">
              Ajusta tus métricas para estimar el impacto de Smart Ink en tus resultados.
            </p>

            <div className="mt-8 grid gap-6 md:grid-cols-2">
              <div className="space-y-6">
                <div>
                  <div className="flex items-center justify-between text-sm text-white/70">
                    <span>Ingresos</span>
                    <span>{formatCurrency(ingresos)}</span>
                  </div>
                  <input
                    type="range"
                    min="1000"
                    max="100000"
                    value={ingresos}
                    onChange={(e) => setIngresos(parseInt(e.target.value, 10))}
                    className="w-full accent-gold"
                  />
                </div>
                <div>
                  <div className="flex items-center justify-between text-sm text-white/70">
                    <span>Gastos</span>
                    <span>{formatCurrency(gastos)}</span>
                  </div>
                  <input
                    type="range"
                    min="1000"
                    max="100000"
                    value={gastos}
                    onChange={(e) => setGastos(parseInt(e.target.value, 10))}
                    className="w-full accent-gold"
                  />
                </div>
                <div>
                  <div className="flex items-center justify-between text-sm text-white/70">
                    <span>Facturas</span>
                    <span>{facturas.toLocaleString('es-MX')}</span>
                  </div>
                  <input
                    type="range"
                    min="10"
                    max="1000"
                    value={facturas}
                    onChange={(e) => setFacturas(parseInt(e.target.value, 10))}
                    className="w-full accent-gold"
                  />
                </div>
              </div>
              <div className="space-y-6">
                <div className="grid gap-4 md:grid-cols-3">
                  <KPI icon="💰" label="Ahorro potencial" value={formatCurrency(metrics.ahorro)} accent="text-gold" />
                  <KPI icon="📈" label="ROI estimado" value={formatPercent(metrics.roi)} accent="text-gold" />
                  <KPI icon="⏱" label="Recuperación" value={`${metrics.dias} días`} accent="text-radar" />
                </div>
                <div className="chart-wrapper">
                  <ResponsiveContainer width="100%" height="100%">
                    <LineChart data={metrics.trend}>
                      <CartesianGrid stroke="rgba(255,255,255,0.08)" />
                      <XAxis dataKey="etiqueta" stroke="#ffffff" tick={{ fill: '#ffffff' }} />
                      <YAxis stroke="#ffffff" tick={{ fill: '#ffffff' }} />
                      <Tooltip
                        formatter={(value) => [`${value.toFixed(1)}%`, 'ROI']}
                        contentStyle={{
                          backgroundColor: '#0A192F',
                          borderRadius: '12px',
                          border: '1px solid rgba(255,255,255,0.1)',
                          color: '#ffffff',
                        }}
                      />
                      <Line type="monotone" dataKey="roi" stroke="#C9A227" strokeWidth={3} dot={{ r: 4 }} />
                    </LineChart>
                  </ResponsiveContainer>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const DemoApp = () => {
        const [activeTab, setActiveTab] = useState('presentacion');

        return (
          <div className="relative">
            <div className="flex flex-wrap gap-2 rounded-3xl bg-white/5 p-2">
              {tabs.map((tab) => (
                <button
                  key={tab.key}
                  onClick={() => setActiveTab(tab.key)}
                  className={`flex-1 rounded-2xl px-5 py-3 text-sm font-semibold transition md:text-base ${
                    activeTab === tab.key
                      ? 'bg-gold text-navy shadow-lg shadow-gold/30'
                      : 'text-white/70 hover:text-white bg-transparent'
                  }`}
                >
                  {tab.label}
                </button>
              ))}
            </div>

            <div className="mt-6">
              {activeTab === 'presentacion' ? <DemoTabPresentation /> : <DemoTabCalculator />}
            </div>
          </div>
        );
      };

      window.onload = () => {
        const rootElement = document.getElementById('root');
        if (rootElement) {
          ReactDOM.render(<DemoApp />, rootElement);
        }
      };
    </script>
  </body>
</html>
