<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  < name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Ink — Demo Inteligente</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { navy:'#0A192F', gold:'#C9A227', radar:'#00FF94' } } } };
  </script>
  <style>.hud-layer{pointer-events:none} body{background-color:#0A192F;color:#fff}</style>
  <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
</head>
<body class="min-h-screen bg-navy text-white selection:bg-white/10 selection:text-white">
  <div class="hud-layer fixed inset-0 bg-[radial-gradient(ellipse_at_top,rgba(29,174,255,0.08),transparent_55%),radial-gradient(ellipse_at_bottom,rgba(0,255,148,0.06),transparent_55%)]"></div>
  <div class="hud-layer fixed inset-0 [background-image:linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] [background-size:40px_40px] opacity-30"></div>

  <header class="relative z-10">
    <div class="mx-auto max-w-6xl px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-white/10 grid place-content-center border border-white/10 overflow-hidden">
          <img src="logo.png" alt="Smart Ink" class="h-9 w-9 object-contain" />
        </div>
        <span class="font-semibold tracking-wide">Smart Ink</span>
      </div>
      <a href="index.html" class="inline-flex items-center gap-2 rounded-2xl bg-gold px-4 py-2 text-sm font-medium text-navy hover:brightness-110 transition">Volver al inicio</a>
    </div>
  </header>

  <main id="root" class="relative z-10 mx-auto max-w-6xl px-6 py-8"></main>

  <footer class="relative z-10 border-t border-white/10">
    <div class="mx-auto max-w-6xl px-6 py-10 text-sm text-white/60 flex items-center justify-between">
      <span>© <span id="year"></span> Smart Ink</span>
    </div>
  </footer>

  <script>
  (function(){
    const e = React.createElement;
    const {useState, useEffect, useRef} = React;
    const { ResponsiveContainer, BarChart, Bar, CartesianGrid, XAxis, YAxis, Tooltip, LineChart, Line, Legend } = Recharts;
    const fmtMoney = (n) => n.toLocaleString('es-MX', {maximumFractionDigits:0});
    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

    function KPI({label, value, suffix='', highlight=false}){
      return e('div',{className:'rounded-2xl border border-white/10 bg-white/5 p-5 text-center'},
        e('div',{className:`text-2xl font-semibold ${highlight?'text-gold':''}`}, `${value}${suffix}`),
        e('div',{className:'text-xs text-white/70 mt-1'}, label)
      );
    }

    function AutoDemo(){
      const days = ['Lun','Mar','Mié','Jue','Vie','Sáb','Dom'];
      const [data, setData] = useState(days.map(d => ({dia:d, count:0})));
      const [total, setTotal] = useState(0);
      const [valor, setValor] = useState(0);
      const [iva, setIva] = useState(0);
      const target = 72;
      const timerRef = useRef(null);

      useEffect(() => {
        let processed = 0;
        timerRef.current = setInterval(() => {
          processed++;
          const dayIndex = Math.floor(Math.random()*days.length);
          const invoiceValue = 1500 + Math.random()*4500;
          setData(prev => prev.map((row, i) => i===dayIndex ? {...row, count: row.count + 1} : row));
          setTotal(p => p + 1);
          setValor(p => p + invoiceValue);
          setIva(p => p + invoiceValue*0.16);
          if(processed >= target){ clearInterval(timerRef.current); }
        }, 140);
        return () => clearInterval(timerRef.current);
      }, []);

      return e('section', {className:'mb-14'},
        e('div',{className:'text-center mb-6'},
          e('h2',{className:'text-3xl font-semibold'},'Presentación automática'),
          e('p',{className:'text-white/70'},'Facturas “entrando” y transformándose en indicadores y gráficas.')
        ),
        e('div',{className:'grid grid-cols-1 md:grid-cols-3 gap-4 mb-6'},
          e(KPI,{label:'Facturas procesadas', value: fmtMoney(total), highlight:true}),
          e(KPI,{label:'Valor total (MXN)', value: '$'+fmtMoney(valor)}),
          e(KPI,{label:'IVA total (16%)', value: '$'+fmtMoney(iva)}),
        ),
        e('div',{className:'mb-6 grid grid-cols-6 sm:grid-cols-12 gap-2'},
          Array.from({length: Math.min(total, 24)}).map((_,i) =>
            e('div',{key:i, className:'h-8 rounded-md bg-white/10 border border-white/10 animate-pulse'})
          )
        ),
        e('div',{style:{width:'100%', height:320}, className:'rounded-2xl border border-white/10 bg-white/5 p-2'},
          e(ResponsiveContainer,null,
            e(BarChart,{data},
              e(CartesianGrid,{strokeDasharray:'3 3', stroke:'#ffffff20'}),
              e(XAxis,{dataKey:'dia', stroke:'#ffffff90'}),
              e(YAxis,{stroke:'#ffffff90'}),
              e(Tooltip,null),
              e(Bar,{dataKey:'count', fill:'#C9A227', radius:[6,6,0,0]})
            )
          )
        )
      );
    }

    function Calculator(){
      const [ingresos, setIngresos] = useState(50000);
      const [gastos, setGastos] = useState(25000);
      const [facturas, setFacturas] = useState(200);

      const ahorro = (facturas*45) + (ingresos*0.03) - (gastos*0.015);
      const roi = clamp((ahorro / Math.max(1,gastos))*100, -100, 300);
      const dias = clamp(Math.round(90 - (roi/2)), 10, 120);

      const baseline = [1,2,3,4,5,6].map(x => ({x, base: Math.max(0, roi*0.5*(x/6))}));
      const projected = [1,2,3,4,5,6].map(x => ({x, smart: Math.max(0, roi*(x/6))}));
      const merged = baseline.map((b,i) => ({x:b.x, base:b.base, smart: projected[i].smart}));

      return e('section', {id:'calc', className:'mb-8'},
        e('div',{className:'text-center mb-6'},
          e('h2',{className:'text-3xl font-semibold'},'Calculadora interactiva'),
          e('p',{className:'text-white/70'},'Ajusta tus números para ver impacto en ahorro, ROI y recuperación.')
        ),
        e('div',{className:'grid grid-cols-1 md:grid-cols-3 gap-6 mb-6'},
          e('div',null,
            e('label',{className:'text-sm text-white/70'},'Ingresos mensuales (MXN)'),
            e('input',{type:'range', min:10000, max:100000, step:1000, value:ingresos,
              onChange:(ev)=>setIngresos(+ev.target.value), className:'w-full accent-gold'}),
            e('div',{className:'text-right text-sm text-white/70'},'$'+fmtMoney(ingresos))
          ),
          e('div',null,
            e('label',{className:'text-sm text-white/70'},'Gastos mensuales (MXN)'),
            e('input',{type:'range', min:5000, max:90000, step:1000, value:gastos,
              onChange:(ev)=>setGastos(+ev.target.value), className:'w-full accent-gold'}),
            e('div',{className:'text-right text-sm text-white/70'},'$'+fmtMoney(gastos))
          ),
          e('div',null,
            e('label',{className:'text-sm text-white/70'},'Facturas procesadas / mes'),
            e('input',{type:'range', min:10, max:1000, step:10, value:facturas,
              onChange:(ev)=>setFacturas(+ev.target.value), className:'w-full accent-gold'}),
            e('div',{className:'text-right text-sm text-white/70'},fmtMoney(facturas)+' facturas')
          )
        ),
        e('div',{className:'grid grid-cols-1 md:grid-cols-3 gap-4 mb-6'},
          e(KPI,{label:'Ahorro estimado', value:'$'+fmtMoney(ahorro), highlight:true}),
          e(KPI,{label:'ROI estimado', value:roi.toFixed(1), suffix:'%'}),
          e(KPI,{label:'Recuperación', value:String(dias), suffix:' días'}),
        ),
        e('div',{style:{width:'100%', height:320}, className:'rounded-2xl border border-white/10 bg-white/5 p-2'},
          e(ResponsiveContainer,null,
            e(LineChart,{data: merged},
              e(CartesianGrid,{strokeDasharray:'3 3', stroke:'#ffffff20'}),
              e(XAxis,{dataKey:'x', stroke:'#ffffff90'}),
              e(YAxis,{stroke:'#ffffff90'}),
              e(Tooltip,null),
              e(Legend,{wrapperStyle:{color:'#fff'}}),
              e(Line,{type:'monotone', dataKey:'base', name:'Antes', stroke:'#888888', strokeWidth:2}),
              e(Line,{type:'monotone', dataKey:'smart', name:'Con Smart Ink', stroke:'#C9A227', strokeWidth:2})
            )
          )
        ),
        e('div',{className:'mt-4 text-white/70 text-sm text-center'},'La gráfica compara ROI (Antes vs Con Smart Ink) para 6 periodos.')
      );
    }

    function App(){
      useEffect(()=>{
        const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();
      },[]);

      return e('div',{},
        e(AutoDemo,null),
        e('div',{className:'my-10 border-t border-white/10'}),
        e(Calculator,null)
      );
    }

    function mount(){
      const root = document.getElementById('root');
      if(!root){ return; }
      try{ ReactDOM.render(e(App), root); }
      catch(err){ root.innerHTML = '<p class="text-white/70">Error cargando la demo.</p>'; console.error(err); }
    }
    if(document.readyState==='complete' || document.readyState==='interactive'){ setTimeout(mount,0); }
    else { window.addEventListener('DOMContentLoaded', mount); }
  })();
  </script>
</body>
</html>
