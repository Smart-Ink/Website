<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Ink | Demo Inteligente</title>

    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React + ReactDOM + Recharts (UMD builds) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>

    <style>
      body {
        background-color: #0a192f;
        color: #fff;
        font-family: "Inter", sans-serif;
        overflow-x: hidden;
      }
      .hud-grid::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image: linear-gradient(
            rgba(201, 162, 39, 0.05) 1px,
            transparent 1px
          ),
          linear-gradient(
            90deg,
            rgba(201, 162, 39, 0.05) 1px,
            transparent 1px
          );
        background-size: 40px 40px;
        z-index: 0;
      }
      .glow {
        text-shadow: 0 0 10px #c9a227;
      }
    </style>
  </head>

  <body class="hud-grid">
    <header
      class="flex items-center justify-between px-6 py-4 border-b border-yellow-600 relative z-10"
    >
      <img src="logo.png" alt="Smart Ink" class="h-10" />
      <a
        href="index.html"
        class="text-yellow-500 hover:text-yellow-300 font-semibold"
        >Volver al inicio</a
      >
    </header>

    <main id="root" class="relative z-10"></main>

    <footer
      class="text-center text-sm text-yellow-600 py-4 border-t border-yellow-700 mt-8 relative z-10"
    >
      © Smart Ink
    </footer>

    <script>
      const { useState, useEffect } = React;
      const {
        BarChart,
        Bar,
        XAxis,
        YAxis,
        CartesianGrid,
        Tooltip,
        Legend,
        ResponsiveContainer,
        LineChart,
        Line,
      } = Recharts;

      // Utility functions
      function randomDay() {
        const days = ["Lun", "Mar", "Mié", "Jue", "Vie", "Sáb", "Dom"];
        return days[Math.floor(Math.random() * days.length)];
      }
      function random(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      // ----- COMPONENT: App -----
      function App() {
        return React.createElement(
          "div",
          { className: "flex flex-col items-center w-full" },
          React.createElement(AutoPresentationSection),
          React.createElement(InteractiveCalculatorSection)
        );
      }

      // ----- COMPONENT: Auto Presentation -----
      function AutoPresentationSection() {
        const [invoices, setInvoices] = useState([]);
        const [done, setDone] = useState(false);

        useEffect(() => {
          let count = 0;
          const timer = setInterval(() => {
            if (count >= 20) {
              clearInterval(timer);
              setDone(true);
            } else {
              setInvoices((prev) => [
                ...prev,
                { day: randomDay(), value: random(1000, 5000) },
              ]);
              count++;
            }
          }, 150);
          return () => clearInterval(timer);
        }, []);

        const totalValue = invoices.reduce((a, b) => a + b.value, 0);
        const totalIVA = totalValue * 0.16;
        const grouped = {};
        invoices.forEach((i) => {
          grouped[i.day] = (grouped[i.day] || 0) + 1;
        });
        const data = ["Lun", "Mar", "Mié", "Jue", "Vie", "Sáb", "Dom"].map(
          (d) => ({ day: d, facturas: grouped[d] || 0 })
        );

        return React.createElement(
          "section",
          { className: "w-full max-w-5xl mt-10 text-center" },
          React.createElement(
            "h2",
            { className: "text-3xl font-bold mb-6 text-yellow-400 glow" },
            "Procesamiento Automático de Facturas"
          ),
          React.createElement(
            "div",
            {
              className:
                "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-yellow-400",
            },
            [
              { label: "Facturas procesadas", value: invoices.length },
              {
                label: "Valor total (MXN)",
                value: totalValue.toLocaleString("es-MX"),
              },
              {
                label: "IVA estimado (16%)",
                value: totalIVA.toLocaleString("es-MX"),
              },
            ].map((kpi, idx) =>
              React.createElement(
                "div",
                {
                  key: idx,
                  className:
                    "border border-yellow-700 rounded-xl p-4 shadow-lg shadow-yellow-900/40",
                },
                React.createElement(
                  "p",
                  { className: "text-sm uppercase mb-1 text-yellow-500" },
                  kpi.label
                ),
                React.createElement(
                  "p",
                  { className: "text-2xl font-bold glow" },
                  kpi.value
                )
              )
            )
          ),
          React.createElement(
            "div",
            { className: "w-full h-64" },
            React.createElement(
              ResponsiveContainer,
              { width: "100%", height: "100%" },
              React.createElement(
                BarChart,
                { data: data },
                React.createElement(CartesianGrid, {
                  strokeDasharray: "3 3",
                  stroke: "#2d3e59",
                }),
                React.createElement(XAxis, { dataKey: "day", stroke: "#fff" }),
                React.createElement(YAxis, { stroke: "#fff" }),
                React.createElement(Tooltip, { contentStyle: { background: "#0A192F", border: "1px solid #C9A227" } }),
                React.createElement(Bar, {
                  dataKey: "facturas",
                  fill: "#C9A227",
                  animationDuration: 800,
                })
              )
            )
          )
        );
      }

      // ----- COMPONENT: Interactive Calculator -----
      function InteractiveCalculatorSection() {
        const [ingresos, setIngresos] = useState(50000);
        const [gastos, setGastos] = useState(30000);
        const [facturas, setFacturas] = useState(200);

        const ahorro =
          facturas * 45 + ingresos * 0.03 - gastos * 0.015;
        const ROI = (ahorro / gastos) * 100;
        const recuperacion = Math.min(120, Math.max(10, 90 - ROI / 2));

        const chartData = Array.from({ length: 6 }).map((_, i) => ({
          mes: `Mes ${i + 1}`,
          Base: ingresos - gastos - i * 500,
          "Con Smart Ink": ingresos - gastos + ahorro / 6 - i * 500,
        }));

        return React.createElement(
          "section",
          { className: "w-full max-w-5xl mt-20 text-center" },
          React.createElement(
            "h2",
            { className: "text-3xl font-bold mb-6 text-yellow-400 glow" },
            "Calculadora Interactiva"
          ),
          React.createElement(
            "div",
            { className: "grid md:grid-cols-3 gap-6 text-left mb-6" },
            [
              {
                label: "Ingresos (MXN)",
                value: ingresos,
                setter: setIngresos,
                min: 10000,
                max: 100000,
              },
              {
                label: "Gastos (MXN)",
                value: gastos,
                setter: setGastos,
                min: 5000,
                max: 90000,
              },
              {
                label: "Facturas",
                value: facturas,
                setter: setFacturas,
                min: 10,
                max: 1000,
              },
            ].map((input, idx) =>
              React.createElement(
                "div",
                { key: idx },
                React.createElement(
                  "label",
                  { className: "block mb-2 text-yellow-500" },
                  `${input.label}: ${input.value.toLocaleString("es-MX")}`
                ),
                React.createElement("input", {
                  type: "range",
                  min: input.min,
                  max: input.max,
                  value: input.value,
                  onChange: (e) => input.setter(Number(e.target.value)),
                  className:
                    "w-full accent-yellow-500 cursor-pointer h-2 rounded-lg",
                })
              )
            )
          ),
          React.createElement(
            "div",
            {
              className:
                "grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 text-yellow-400",
            },
            [
              { label: "Ahorro estimado", value: ahorro.toFixed(2) + " MXN" },
              { label: "ROI estimado", value: ROI.toFixed(2) + " %" },
              {
                label: "Recuperación",
                value: recuperacion.toFixed(0) + " días",
              },
            ].map((kpi, idx) =>
              React.createElement(
                "div",
                {
                  key: idx,
                  className:
                    "border border-yellow-700 rounded-xl p-4 shadow-lg shadow-yellow-900/40",
                },
                React.createElement(
                  "p",
                  { className: "text-sm uppercase mb-1 text-yellow-500" },
                  kpi.label
                ),
                React.createElement(
                  "p",
                  { className: "text-2xl font-bold glow" },
                  kpi.value
                )
              )
            )
          ),
          React.createElement(
            "div",
            { className: "w-full h-72" },
            React.createElement(
              ResponsiveContainer,
              { width: "100%", height: "100%" },
              React.createElement(
                LineChart,
                { data: chartData },
                React.createElement(CartesianGrid, {
                  strokeDasharray: "3 3",
                  stroke: "#2d3e59",
                }),
                React.createElement(XAxis, { dataKey: "mes", stroke: "#fff" }),
                React.createElement(YAxis, { stroke: "#fff" }),
                React.createElement(Tooltip, { contentStyle: { background: "#0A192F", border: "1px solid #C9A227" } }),
                React.createElement(Legend, null),
                React.createElement(Line, {
                  type: "monotone",
                  dataKey: "Base",
                  stroke: "#888888",
                  strokeWidth: 2,
                  dot: false,
                }),
                React.createElement(Line, {
                  type: "monotone",
                  dataKey: "Con Smart Ink",
                  stroke: "#C9A227",
                  strokeWidth: 3,
                  dot: true,
                })
              )
            )
          )
        );
      }

      // Mount app
      document.addEventListener("DOMContentLoaded", () => {
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(App));
      });
    </script>
  </body>
</html>
